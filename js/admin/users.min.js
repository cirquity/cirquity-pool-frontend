/*!
 * Cirquity - Cirquity v0.1.0 (https://cirquity.com)
 * Copyright 2020-2021 The Cirquity Developers
 * Licensed under MIT (https://github.com/cirquity/cirquity-pool/blob/master/LICENSE)
 */

!function(e){e((function(){currentPage={destroy:function(){},update:function(e){}};let a=setInterval((function(){lastStats&&(e.createUserTable(),e.loadTranslations(),clearInterval(a))}),10)})),e.parseUsers=function(a){let t=0,s=[],r={};for(let r in a)if(a.hasOwnProperty(r)){let n=a[r];s.push({coin:lastStats.config.coin,miner:r,minerLabel:e.truncate(r,40),wallet:n,timeago:e.timeago(new Date(1e3*n.lastShare).toISOString()),readablePending:e.getReadableCoin(lastStats,n.pending,null,!0),readablePaid:e.getReadableCoin(lastStats,n.paid,null,!0),readableHashrate:e.getReadableHashRateString(n.hashrate)+"/s",readableHashes:e.getReadableHashRateString(n.hashes)}),t++}return e("#totalUsers").html(t),r.users=s.sort((function(e,a){return e.wallet.hashrate-a.wallet.hashrate})).reverse(),r},e.createUserTable=function(a){let t=docCookies.getItem("password");t&&!a||(t=prompt("Enter admin password")),e.ajax({url:api+"/admin_users",data:{password:t},dataType:"json",cache:!1,success:function(a){docCookies.setItem("password",t,1/0),e.renderAdminTemplate(e.parseUsers(a),"#usersListTable","#template")},error:function(e){docCookies.removeItem("password")}})}}(jQuery);